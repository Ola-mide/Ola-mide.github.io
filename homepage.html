<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="description" content="HomePage">
        <meta name="author" content="Abdulrahman">
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <link rel="stylesheet" type="text/css" href="homepage.css">
        
        <title>HOME PAGE</title>
    </head>
    <body>
        <div class="menu-bar">
            <ul>
                <li class = "active"><b><a href="homepage.html">Home</a></b></li>
                <li><b><a href="temperature.html">Temperature</a></b></li>
                <li><b><a href="lighting.html">Lighting</a></b></li>
                <li><b><a href="pump_valves.html">Pump & Valves</a></b></li>
                <li><b><a href="charts.html">Charts</a></b></li>
            </ul>
        </div>
        <br><br><br><br>
        <div class="cropmodestyle"><b>Crop Mode:&nbsp;&nbsp;</b><b id = "cropmode">...</b></div>
        <div class="tray1">
            <b class="traytext">TRAY 1</b>
            <br><br>
            <div class="tables">
                <table id="tableParam1">
                    <tr>
                      <th>Parameter</th>
                      <th>Value</th>
                    </tr>
                    <tr>
                      <td>NPK</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Moisture (m<sup>3</sup>/m<sup>3</sup>)</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>E.C. (S/m)</td> 
                      <td></td>
                    </tr>
                    <tr>
                      <td>pH</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Substrate Temperature (&#8451;)</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Room Temperature (&#8451;)</td>
                      <td></td>
                    </tr>
                  </table>
                  &nbsp;
                <table id="tableStat1">
                    <tr>
                      <th>&nbsp;</th>
                      <th>Status</th>
                    </tr>
                    <tr>
                      <td>LED Grow Light</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Nutrient Valve</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Water Valve</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Cooling Fan</td>
                      <td></td>
                    </tr>
                  </table>  
            </div>
        </div>
        <br>
        <div class="tray2">
            <b class="traytext">TRAY 2</b>
            <br><br>
            <div class="tables">
                <table id="tableParam2">
                    <tr>
                      <th>Parameter</th>
                      <th>Value</th>
                    </tr>
                    <tr>
                      <td>NPK</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Moisture (m<sup>3</sup>/m<sup>3</sup>)</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>E.C. (S/m)</td> 
                      <td></td>
                    </tr>
                    <tr>
                      <td>pH</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Substrate Temperature (&#8451;)</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Room Temperature (&#8451;)</td>
                      <td></td>
                    </tr>
                  </table>
                  &nbsp;
                <table id="tableStat2">
                    <tr>
                      <th>&nbsp;</th>
                      <th>Status</th>
                    </tr>
                    <tr>
                      <td>LED Grow Light</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Nutrient Valve</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Water Pump</td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>Cooling Fan</td>
                      <td></td>
                    </tr>
                  </table>
                  <br><br><br>
        </div>
        <div id="invisible">
          <b id="n1"></b>
          <b id="p1"></b>
          <b id="k1"></b>
          <b id="n2"></b>
          <b id="p2"></b>
          <b id="k2"></b>
          </div>
            <br><br><br>
        <script>
          const url = "https://script.google.com/macros/s/AKfycbx7c34m14o9u0FhhzDZuZiKUpV5OU4C7oROoZxLUCpIqshJe9n8EMuaRod50cxEIqP2/exec" 
          
          // fetching the data from each column in the sheet

          fetch(`${url}?header=Cropmode`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("cropmode").innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              // Tray1 data
              fetch(`${url}?header=N1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("n1").innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=P1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("p1").innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=K1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("k1").innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Moisture1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam1").rows[2].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=EC1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam1").rows[3].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=pH1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam1").rows[4].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Subtemp1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam1").rows[5].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Roomtemp1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam1").rows[6].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Growlight1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat1").rows[1].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Nutvalve1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat1").rows[2].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Watvalve`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat1").rows[3].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Coolingfan1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat1").rows[4].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));
              
              // Tray 2 data
              fetch(`${url}?header=N2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("n2").innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=P2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("p2").innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=K2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("k2").innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Moisture2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam2").rows[2].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=EC2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam2").rows[3].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=pH2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam2").rows[4].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Subtemp2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam2").rows[5].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Roomtemp2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam2").rows[6].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Growlight2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat2").rows[1].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Nutvalve2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat2").rows[2].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Waterpump`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat2").rows[3].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));

              fetch(`${url}?header=Coolingfan2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat2").rows[4].cells;
                  x[1].innerHTML = data;
              })
              .catch((error) => console.error('!!!!!!!!', error));
              

              const updateN1 = () => {
          fetch(`${url}?header=N1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("n1").innerHTML = data;
                  console.info("Updating N1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };
      const updateP1 = () => {
          fetch(`${url}?header=P1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("p1").innerHTML = data;
                  console.info("Updating P1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };
      const updateK1 = () => {
          fetch(`${url}?header=K1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("k1").innerHTML = data;
                  console.info("Updating K1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };
        const updateNPK1 = () => {
                  var n1 = document.getElementById("n1").innerHTML;
                  var p1 = document.getElementById("p1").innerHTML;
                  var k1 = document.getElementById("k1").innerHTML;
                  var npk1 = n1 + ":" + p1 +":" + k1;
                  var x = document.getElementById("tableParam1").rows[1].cells;
                  x[1].innerHTML = npk1;
                  console.info("Updating NPK1 status..");
              };

        const updateMoisture1 = () => {
          fetch(`${url}?header=Moisture1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam1").rows[2].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Moisture1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateEC1 = () => {
          fetch(`${url}?header=EC1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam1").rows[3].cells;
                  x[1].innerHTML = data;
                  console.info("Updating EC1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updatepH1 = () => {
          fetch(`${url}?header=pH1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam1").rows[4].cells;
                  x[1].innerHTML = data;
                  console.info("Updating pH1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateSubtemp1 = () => {
          fetch(`${url}?header=Subtemp1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam1").rows[5].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Subtemp1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateRoomtemp1 = () => {
          fetch(`${url}?header=Roomtemp1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam1").rows[6].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Roomtemp1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateGrowlight1 = () => {
          fetch(`${url}?header=Growlight1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat1").rows[1].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Growlight1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateNutvalve1 = () => {
          fetch(`${url}?header=Nutvalve1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat1").rows[2].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Nutvalve1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateWatvalve = () => {
          fetch(`${url}?header=Watvalve`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat1").rows[3].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Watvalve status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateCoolingfan1 = () => {
          fetch(`${url}?header=Coolingfan1`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat1").rows[4].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Coolingfan1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

      // Tray 2 functions
      const updateN2 = () => {
          fetch(`${url}?header=N2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("n2").innerHTML = data;
                  console.info("Updating N2 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };
      const updateP2 = () => {
          fetch(`${url}?header=P2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("p2").innerHTML = data;
                  console.info("Updating P2 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };
      const updateK2 = () => {
          fetch(`${url}?header=K2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  document.getElementById("k2").innerHTML = data;
                  console.info("Updating K1 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };
        const updateNPK2 = () => {
                  var n2 = document.getElementById("n2").innerHTML;
                  var p2 = document.getElementById("p2").innerHTML;
                  var k2 = document.getElementById("k2").innerHTML;
                  var npk2 = n2 + ":" + p2 +":" + k2;
                  var x = document.getElementById("tableParam2").rows[1].cells;
                  x[1].innerHTML = npk2;
                  console.info("Updating NPK2 status..");
              };

        const updateMoisture2 = () => {
          fetch(`${url}?header=Moisture2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam2").rows[2].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Moisture2 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateEC2 = () => {
          fetch(`${url}?header=EC2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam2").rows[3].cells;
                  x[1].innerHTML = data;
                  console.info("Updating EC2 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updatepH2 = () => {
          fetch(`${url}?header=pH2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam2").rows[4].cells;
                  x[1].innerHTML = data;
                  console.info("Updating EC2 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateSubtemp2 = () => {
          fetch(`${url}?header=Subtemp2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam2").rows[5].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Subtemp2 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateRoomtemp2 = () => {
          fetch(`${url}?header=Roomtemp2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableParam2").rows[6].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Roomtemp2 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateGrowlight2 = () => {
          fetch(`${url}?header=Growlight2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat2").rows[1].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Growlight2 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateNutvalve2 = () => {
          fetch(`${url}?header=Nutvalve2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat2").rows[2].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Nutvalve2 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateWaterpump = () => {
          fetch(`${url}?header=Waterpump`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat2").rows[3].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Waterpump status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };

        const updateCoolingfan2 = () => {
          fetch(`${url}?header=Coolingfan2`)
              .then((response) => response.json())
              .then(({ data }) => {
                  console.log(data);
                  var x = document.getElementById("tableStat2").rows[4].cells;
                  x[1].innerHTML = data;
                  console.info("Updating Coolingfan2 status..");
              })
              .catch((error) => console.error('!!!!!!!!', error));
      };


              const autoRefresh = ({ anyFunction, interval = 5000 }) => {
        const execute = () => {
          anyFunction();
          setTimeout(execute, interval);
        };
        execute();
      };

      // Auto refresh tray1

      autoRefresh({
        anyFunction: updateN1,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateP1,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateK1,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateNPK1,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateMoisture1,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateEC1,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updatepH1,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateSubtemp1,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateRoomtemp1,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateGrowlight1,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateNutvalve1,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateWatvalve,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateCoolingfan1,
        interval: 5000,
      });

      // Auto refresh tray2
      
      autoRefresh({
        anyFunction: updateN2,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateP2,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateK2,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateNPK2,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateMoisture2,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateEC2,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updatepH2,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateSubtemp2,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateRoomtemp2,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateGrowlight2,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateNutvalve2,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateWaterpump,
        interval: 5000,
      });
      autoRefresh({
        anyFunction: updateCoolingfan2,
        interval: 5000,
      });
      </script>
    </body>
</html>
